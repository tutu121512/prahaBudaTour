<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ReserveQuestion">

<!-- DB 컬럼명에 userDTO의 값 하나씩 대입 이름이 같으면 resultMap 생성하지 않아도 됨 -->


	<insert id="ReserveQuestionInsert" parameterType="boardDTO" >
	</insert>
	
	<select id="ReserveQuestionList" resultMap="boardMap" parameterType="int" >
	SELECT
	board.board_no boardNo,
	board.writer as writer,
	board.title as title,
	to_char(board.board_date,'YYYY/MM/DD') as boardDate
	FROM (SELECT rownum as rnum,board_no,writer,title,board_Date
	FROM (SELECT board_no,writer,title,board_Date
	from board
	where board_state='reserveQuestion' and location='P'
	order by board_no+0 desc) ) board
	where rnum  BETWEEN  ((#{curPage}-1)*10)+1  AND #{curPage}*10
	</select>
	
	<select id="ReserveQuestionListCount" resultType="int">
	select count(board_no)
	from board
	where board_state='reserveQuestion' and location='P'
	</select>
	
	<select id="prahaReservePasswordCheck" parameterType="boardDTO" resultMap="boardMap">
	SELECT *
	FROM BOARD
	WHERE board_state='reserveQuestion'and location='P' 
	and board_no=#{boardNo} and password=#{password}
	</select>
	
	<delete id="prahaReserveDelete" parameterType="boardDTO">
	DELETE FROM BOARD WHERE BOARD_NO=#{boardNo} AND board_state='reserveQuestion'and location='P'
	</delete>
	
	<update id="prahaReserveUpdate" parameterType="boardDTO">
	UPDATE BOARD SET 
	title=#{title},
	writer=#{writer},
	content=#{content},
	board_date=sysdate, 
	password=#{password},
	phone=#{phone},
	kakao_id=#{kakaoId} 
	WHERE BOARD_NO=#{boardNo} AND board_state='reserveQuestion' and location='P'
	</update>
</mapper>